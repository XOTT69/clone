<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lampa AI Clone</title>
    <!-- Tailwind CSS для стилізації -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React та Babel для роботи коду прямо в браузері -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Іконки Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            background-color: #020617;
            color: #e2e8f0;
            margin: 0;
            user-select: none;
            overflow-x: hidden;
        }
        /* Стиль фокусу для пультів ТВ */
        .focusable:focus {
            outline: 3px solid #3b82f6;
            transform: scale(1.05);
            z-index: 50;
        }
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #1e293b;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        // Копіюємо іконки з глобального об'єкта lucide
        const { 
            Home, Film, Tv, Search, Settings, Play, Info, X, 
            Heart, Star, Sparkles, Send, Loader2, Bot, Globe, Layers, Trash2, Plus
        } = lucide;

        // ВСТАВТЕ ВАШ КЛЮЧ ТУТ
        const apiKey = ""; 

        const MOCK_DB = [
            { id: 1, title: "Дюна: Частина друга", year: 2024, rating: 8.8, type: "movie", genres: ["Фантастика"], poster: "https://images.unsplash.com/photo-1541963463532-d68292c34b19?w=400", description: "Епічне продовження подорожі Пола Атріда." },
            { id: 2, title: "Оппенгеймер", year: 2023, rating: 8.6, type: "movie", genres: ["Драма"], poster: "https://images.unsplash.com/photo-1440404653325-ab127d49abc1?w=400", description: "Історія створення атомної бомби." },
            { id: 3, title: "Фолаут", year: 2024, rating: 8.5, type: "series", genres: ["Фантастика"], poster: "https://images.unsplash.com/photo-1534237710431-e2fc698436d0?w=400", description: "Світ після ядерної катастрофи." }
        ];

        function App() {
            const [activeTab, setActiveTab] = useState('home');
            const [selectedItem, setSelectedItem] = useState(null);
            const [plugins, setPlugins] = useState([
                { id: 1, name: 'Online Mod', url: 'https://lampa.app/online.js' }
            ]);

            // Обробка кнопки "Назад" для ТБ
            useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.keyCode === 8 || e.keyCode === 27 || e.keyCode === 461) {
                        if (selectedItem) setSelectedItem(null);
                    }
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [selectedItem]);

            return (
                <div className="flex min-h-screen">
                    {/* Sidebar */}
                    <nav className="w-24 bg-slate-900 border-r border-white/5 flex flex-col items-center py-8 gap-8">
                        <div className="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center mb-4">
                            <i data-lucide="play" className="text-white"></i>
                        </div>
                        <button onClick={() => setActiveTab('home')} className={`p-3 rounded-xl focusable ${activeTab === 'home' ? 'text-blue-400' : 'text-slate-500'}`}>
                            <i data-lucide="home"></i>
                        </button>
                        <button onClick={() => setActiveTab('ai')} className={`p-3 rounded-xl focusable ${activeTab === 'ai' ? 'text-purple-400' : 'text-slate-500'}`}>
                            <i data-lucide="sparkles"></i>
                        </button>
                        <button onClick={() => setActiveTab('plugins')} className={`p-3 rounded-xl focusable ${activeTab === 'plugins' ? 'text-slate-200' : 'text-slate-500'}`}>
                            <i data-lucide="layers"></i>
                        </button>
                    </nav>

                    {/* Main Content */}
                    <main className="flex-1 p-10 overflow-y-auto h-screen custom-scrollbar">
                        {activeTab === 'home' && (
                            <div className="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
                                {MOCK_DB.map(item => (
                                    <div key={item.id} onClick={() => setSelectedItem(item)} className="focusable group cursor-pointer bg-slate-900 rounded-xl overflow-hidden border border-white/5">
                                        <img src={item.poster} className="w-full aspect-[2/3] object-cover" />
                                        <div className="p-4 font-bold truncate">{item.title}</div>
                                    </div>
                                ))}
                            </div>
                        )}
                        
                        {activeTab === 'ai' && (
                            <div className="text-center py-20">
                                <h2 className="text-3xl font-bold mb-4">AI Помічник (Gemini)</h2>
                                <p className="text-slate-400">Введіть ваш ключ в коді для активації</p>
                            </div>
                        )}

                        {activeTab === 'plugins' && (
                            <div>
                                <h2 className="text-3xl font-bold mb-6">Менеджер плагінів</h2>
                                {plugins.map(p => (
                                    <div key={p.id} className="bg-slate-900 p-4 rounded-xl mb-3 flex justify-between border border-white/5">
                                        <span>{p.name}</span>
                                        <span className="text-slate-500">{p.url}</span>
                                    </div>
                                ))}
                            </div>
                        )}
                    </main>

                    {/* Modal */}
                    {selectedItem && (
                        <div className="fixed inset-0 bg-black/90 flex items-center justify-center p-10 z-[100]">
                            <div className="bg-slate-900 rounded-3xl overflow-hidden flex max-w-4xl w-full border border-white/10">
                                <img src={selectedItem.poster} className="w-1/3 object-cover" />
                                <div className="p-10">
                                    <h2 className="text-4xl font-bold mb-4">{selectedItem.title}</h2>
                                    <p className="text-slate-400 mb-8">{selectedItem.description}</p>
                                    <button className="bg-blue-600 px-8 py-4 rounded-xl font-bold focusable" onClick={() => alert('Пошук джерел... (потрібні плагіни)')}>
                                        Дивитись онлайн
                                    </button>
                                    <button onClick={() => setSelectedItem(null)} className="ml-4 text-slate-500 focusable p-4">Закрити</button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        
        // Ініціалізація іконок після рендеру
        setTimeout(() => lucide.createIcons(), 100);
    </script>
</body>
</html>
